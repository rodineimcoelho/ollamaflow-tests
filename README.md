# ollamaFlow Tests

This repository contains the performance tests conducted against **ollamaFlow** and other load-balancing strategies, as well as their corresponding results.

## ğŸ¯ Purpose

This repository was created to evaluate the **performance, stability, and efficiency** of different load balancing strategies when serving AI model inference requests.  
It aims to contribute to **open science** by making all test scripts, configurations, and results publicly available for reproducibility and further analysis.

## ğŸ§ª Test Scripts

The following files are [k6](https://k6.io) test scripts:

- **`ollamaflow-test.js`** â€“ Test executed against _ollamaFlow_
- **`haproxy-test.js`** â€“ Test executed against _HAProxy_ strategies (Round Robin and Least Connection)
- **`single-host.js`** â€“ Test executed against a single host, without any load balancer

All test scenarios are identical; only the method used to call the API differs.

## ğŸš€ How to Run the Tests

To run a test, make sure you have [k6](https://k6.io/docs/get-started/installation/) installed.

Example usage:

```bash
# Run test against ollamaFlow
k6 run ollamaflow-test.js

# Run test against HAProxy
k6 run haproxy-test.js

# Run test against a single host
k6 run single-host.js
```

## ğŸ“Š Test Results

The results for each strategy are stored in directories named `result-<strategy-name>`.
Each directory contains the following files:

test.json â€“ Raw k6 output in JSON format

test.csv â€“ k6 output in CSV format

summary.json â€“ k6 summary in JSON format

summary.html â€“ HTML report generated by k6-reporter

## ğŸ“ˆ Plots and Analysis

The plots/ directory contains all notebooks and visualizations used to analyze the test results.

- `*.ipynb` â€“ Jupyter Notebooks that load the k6 result files and generate performance charts and comparisons across strategies.

- `*.png` â€“ Exported plots illustrating awaiting times, throughput and completion rate.

## âš™ï¸ HAProxy Configuration

The haproxy.cfg file contains the configuration used for the HAProxy tests.
